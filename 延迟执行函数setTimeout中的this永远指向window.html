<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script type="text/javascript">
    var shape = {
        name: "rectangle",
        popup: function() {

            console.log('This inside popup(): ' + this.name);

            setTimeout(function() {
                console.log('This inside setTimeout(): ' + this.name);
                console.log("I'm a " + this.name + "!");
            }, 3000);

        }
    };

    //shape.popup(); // 实例中的 this.name 是一个空值

    /*result:
     This inside popup(): rectangle
     This inside setTimeout():
     I'm a !
    */


    var name = 'windowName';
    var shape1 = {
        name: "rectangle",
        popup: function() {

            console.log('This inside popup(): ' + this.name);

            setTimeout(function() {
                console.log(this.name);
                console.log('This inside setTimeout(): ' + this.name);
                console.log("I'm a " + this.name + "!");
            }, 3000);

        }
    };

    shape1.popup();
    /*result:
     This inside popup(): rectangle
     windowName
     This inside setTimeout(): windowName
     I'm a windowName!
    */



    /*换成箭头函数 es6*/
    var shape2 = {
        name: "rectangle",
        popup: function() {

            console.log('This inside popup(): ' + this.name);

            setTimeout( () => {
                console.log('This inside setTimeout(): ' + this.name);
                console.log("I'm a " + this.name + "!");
            }, 3000);

        }
    };

    //shape2.popup();

    //在以上实例编译后端 js 文件中，我们可以看到一行 var _this = this;，
    // _this 在 setTimeout() 的回调函数引用了 name 属性。

    /*result:
     This inside popup(): rectangle
     This inside setTimeout(): rectangle
     40 I'm a rectangle!
    */
</script>
</body>
</html>